const userT = JSON.parse(localStorage.getItem('forumUser'));
if(!userT){ window.location.href = 'index.html'; }
else { document.getElementById('welcome').textContent = `Witaj, ${userT.rank} ${userT.name}!`; }

const postsContainer = document.getElementById('posts');
const postBtn = document.getElementById('postBtn');
const postText = document.getElementById('postText');
const logoutBtn = document.getElementById('logoutBtn');

let posts = JSON.parse(localStorage.getItem('forumPosts')) || [];

function renderPosts(){
    postsContainer.innerHTML = '';
    posts.forEach(post => {
        const div = document.createElement('div');
        div.className = 'post';
        div.innerHTML = `<strong class="${post.rank.toLowerCase().replace(' ', '-')}">${post.rank} ${post.user}</strong>: ${post.text}`;
        postsContainer.appendChild(div);
    });
}
renderPosts();

postBtn.addEventListener('click', ()=>{
    const text = postText.value.trim();
    if(text){
        posts.push({user: userT.name, rank: userT.rank, text: text});
        localStorage.setItem('forumPosts', JSON.stringify(posts));
        renderPosts();
        postText.value = '';
    }
});

logoutBtn.addEventListener('click', ()=>{
    localStorage.removeItem('forumUser');
    window.location.href = 'index.html';
});
